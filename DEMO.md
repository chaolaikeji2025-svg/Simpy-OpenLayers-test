# 🎬 系统演示指南

## 快速体验（3分钟）

### Step 1: 启动系统 (30秒)

```bash
cd Simpy-OpenLayers-test
./start.sh
```

等待看到:
```
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### Step 2: 打开浏览器 (10秒)

访问: **http://localhost:8000**

你会看到:
- 左侧: 车间地图（显示工位、缓冲区、通道）
- 右侧: 控制面板、统计数据、事件日志

### Step 3: 启动仿真 (10秒)

1. 在右侧 **"仿真控制"** 面板
2. 仿真时长设置为 `50` 秒（快速演示）
3. 点击 **"▶️ 开始仿真"** 按钮

### Step 4: 观察效果 (2分钟)

你会看到：

**地图动画**:
- 🔵 蓝色小圆点从左侧原料区出现
- ➡️ 圆点平滑移动到工位1
- 🟢 工位1变为绿色（正在加工）
- ➡️ 加工完成后移动到缓冲区1
- 🟨 缓冲区显示库存数量（如 "1/5"）
- ➡️ 继续流转到工位2、工位3
- 🟣 最终到达右侧成品区

**实时数据更新**:
- 📊 已生产数量不断增加
- 📦 在制品数量波动
- ⚡ 产能实时计算
- 🔧 工位利用率柱状图变化

**事件日志滚动**:
```
[12.34s] part_arrived: PART-0005
[12.34s] part_queue: workstation 0
[12.34s] part_processing: 5.2s
[17.54s] part_completed_station: workstation 0
...
```

### Step 5: 分析结果 (30秒)

仿真完成后，查看统计面板：

- **已生产**: 8-12件
- **产能**: 0.16-0.24 件/秒
- **周期时间**: 15-25 秒
- **工位利用率**: 
  - 工位1: ~85%（通常最忙）
  - 工位2: ~70%
  - 工位3: ~60%

## 🎯 关键演示点

### 1. 生产瓶颈可视化

**现象**: 工位1前面物料堆积，缓冲区1经常满

**原因**: 工位1处理速度慢于物料到达速度

**观察**: 
- 工位1利用率最高（~85%）
- 缓冲区1库存经常接近5
- 工位2、3有等待时间

### 2. 物料流转动画

**亮点**: 
- 平滑的移动动画（使用缓动函数）
- 状态颜色变化（到达→排队→加工→完成）
- 实时位置更新

### 3. 实时统计计算

**KPI指标**:
- 产量统计
- 在制品(WIP)监控
- 设备利用率
- 平均周期时间
- 平均排队时间

### 4. WebSocket实时通信

**技术展示**:
- 后端SimPy仿真产生事件
- WebSocket推送到前端
- 前端OpenLayers即时渲染
- 延迟 < 100ms

## 📸 截图说明

### 初始状态
```
所有工位显示为灰色圆圈（空闲）
缓冲区显示 "0/5"
地图上没有物料
```

### 运行中
```
工位1: 绿色（忙碌）
缓冲区1: "2/5"（有库存）
3-4个蓝色物料圆点在移动
事件日志快速滚动
```

### 完成后
```
统计数据显示最终结果
所有工位恢复灰色
地图清空物料
日志显示 "仿真完成"
```

## 🔬 实验场景

### 场景1: 评估缓冲区容量

**问题**: 缓冲区多大合适？

**方法**:
1. 修改 `backend/simulation.py` 第21行
   ```python
   self.buffer_capacity = 3  # 从5改为3
   ```
2. 重启服务器，运行仿真
3. 观察: 缓冲区是否经常满？工位是否经常等待？

**预期**: 容量小→更多等待→利用率下降

### 场景2: 平衡生产线

**问题**: 如何减少瓶颈？

**方法**:
1. 减少工位1加工时间
   ```python
   self.processing_time_mean = 4.0  # 从5改为4
   ```
2. 运行仿真
3. 观察利用率变化

**预期**: 瓶颈转移，整体产能提升

### 场景3: 到达率影响

**问题**: 订单增加如何应对？

**方法**:
1. 减少到达间隔
   ```python
   self.arrival_interval = 3.0  # 从4改为3
   ```
2. 运行仿真
3. 观察WIP和周期时间

**预期**: WIP增加，周期时间延长，可能需要扩产

## 💡 演示技巧

### 技巧1: 放慢速度

如果动画太快，修改 `backend/server.py` 第163行:
```python
await asyncio.sleep(0.3)  # 增加延迟到0.3秒
```

### 技巧2: 延长仿真

设置更长的仿真时间（如200秒），观察系统稳态行为

### 技巧3: 对比试验

运行两次仿真，修改参数后对比结果

### 技巧4: 全屏观看

点击浏览器全屏按钮（F11），获得更好的视觉效果

## 🎓 教学要点

### 适合讲解的概念:

1. **离散事件仿真** - SimPy如何建模生产过程
2. **资源竞争** - 工位作为受限资源
3. **排队论** - 缓冲区的作用
4. **瓶颈分析** - 识别系统约束
5. **实时可视化** - WebSocket + OpenLayers
6. **地理信息系统** - GeoJSON数据格式

## 🎬 演示脚本（5分钟版）

**[0:00-0:30] 介绍**
"这是一个融合SimPy仿真和OpenLayers可视化的生产线系统..."

**[0:30-1:00] 系统架构**
"后端用Python+SimPy进行离散事件仿真，通过WebSocket推送到前端，
前端用OpenLayers在地图上可视化..."

**[1:00-2:00] 启动演示**
"现在我启动一个50秒的仿真，大家可以看到物料从原料区进入..."

**[2:00-4:00] 观察现象**
"注意工位1的利用率最高，这是生产瓶颈...
缓冲区1的库存在波动，起到了缓冲作用...
右侧统计数据实时更新..."

**[4:00-5:00] 总结**
"仿真完成！我们生产了X件产品，工位1利用率达到Y%，
这证明了将仿真与可视化结合的价值..."

---

**准备时间**: 5分钟
**演示时长**: 3-5分钟
**技术水平**: 适合所有层次观众
**效果**: ⭐⭐⭐⭐⭐
